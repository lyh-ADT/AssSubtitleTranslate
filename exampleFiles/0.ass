[Script Info]
; Script generated by Aegisub 3.2.2
; http://www.aegisub.org/
Title: Default Aegisub file
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
YCbCr Matrix: TV.601
PlayResX: 1280
PlayResY: 720

[Aegisub Project Garbage]
Last Style Storage: Chili
Audio File: E:/DirectXTutorialByChili/3DFundatmental/15/3D Programming Fundamentals [Gouraud Shading (smooth vertex)] Tutorial 15.mp4
Video File: E:/DirectXTutorialByChili/3DFundatmental/15/3D Programming Fundamentals [Gouraud Shading (smooth vertex)] Tutorial 15.mp4
Video AR Mode: 4
Video AR Value: 1.777778
Video Zoom Percent: 0.750000
Scroll Position: 165
Active Line: 186
Video Position: 20188

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,20,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,2,10,10,10,1
Style: moren,Arial,31,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,2,10,10,10,1
Style: des,Arial,31,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,8,10,10,10,1
Style: 左上对齐,Arial,31,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,7,10,10,10,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:03.94,0:00:04.65,moren,,0,0,0,,，我是Chili
Dialogue: 0,0:00:04.65,0:00:07.05,moren,,0,0,0,,欢迎回到3D基础教程15
Dialogue: 0,0:00:07.05,0:00:09.30,moren,,0,0,0,,今天我们要讨论的是Gouraud着色
Dialogue: 0,0:00:09.30,0:00:11.56,moren,,0,0,0,,我不知道那是不是正确的读法
Dialogue: 0,0:00:11.94,0:00:13.49,moren,,0,0,0,,但是我就这样读了
Dialogue: 0,0:00:13.52,0:00:15.70,moren,,0,0,0,,所以你们最好习惯一下
Dialogue: 0,0:00:15.70,0:00:19.78,moren,,0,0,0,,你们现在应该在想Chili，Gouraud着色到底是什么
Dialogue: 0,0:00:20.42,0:00:23.48,moren,,0,0,0,,这是一个平滑着色你物体的方法
Dialogue: 0,0:00:23.78,0:00:25.98,moren,,0,0,0,,直到现在我们一直都是平面着色
Dialogue: 0,0:00:25.98,0:00:30.24,moren,,0,0,0,,如果你注意游戏里面的话，着色不都是一个个平面拼起来的
Dialogue: 0,0:00:30.24,0:00:31.81,moren,,0,0,0,,它们很好看，平滑，圆
Dialogue: 0,0:00:32.34,0:00:35.34,moren,,0,0,0,,所以我们要学习一种实现它的技巧
Dialogue: 0,0:00:35.34,0:00:37.34,moren,,0,0,0,,如果我们要平滑着色一些东西
Dialogue: 0,0:00:37.66,0:00:40.45,moren,,0,0,0,,我们会需要一些平滑的东西来着色
Dialogue: 0,0:00:40.45,0:00:43.58,moren,,0,0,0,,一个球体是我能想到最平滑的东西了
Dialogue: 0,0:00:43.80,0:00:44.90,moren,,0,0,0,,所以我们想要一个球体
Dialogue: 0,0:00:44.90,0:00:47.30,moren,,0,0,0,,我们可以直接从模型文件中读取一个球体
Dialogue: 0,0:00:48.26,0:00:50.85,moren,,0,0,0,,但是球体是个很简单的几何体
Dialogue: 0,0:00:50.85,0:00:53.28,moren,,0,0,0,,我们可以一步步生成它
Dialogue: 0,0:00:53.28,0:00:57.70,moren,,0,0,0,,这样我们就可以控制它
Dialogue: 0,0:00:57.70,0:01:00.08,moren,,0,0,0,,尤其是它的网格密度
Dialogue: 0,0:01:00.33,0:01:02.06,moren,,0,0,0,,我们生成它的方法就是
Dialogue: 0,0:01:02.06,0:01:05.02,moren,,0,0,0,,有很多种实现的方法，但我们就直接用
Dialogue: 0,0:01:05.02,0:01:08.38,moren,,0,0,0,,纬度经度模型
Dialogue: 0,0:01:08.38,0:01:13.57,moren,,0,0,0,,我们看，纬度，被角度分开这些线
Dialogue: 0,0:01:13.77,0:01:18.37,moren,,0,0,0,,然后经度，它们两个的相交就得到了很好的角顶了
Dialogue: 0,0:01:18.72,0:01:22.04,moren,,0,0,0,,然后我们可以把这个转换成3D模型
Dialogue: 0,0:01:22.48,0:01:24.97,moren,,0,0,0,,然后这些角顶就是网格的角顶
Dialogue: 0,0:01:25.30,0:01:28.88,moren,,0,0,0,,这些平面会是像正方形一样
Dialogue: 0,0:01:29.93,0:01:34.80,moren,,0,0,0,,顶部和底部，你在顶部和底部就各放一个角顶，它们是极点
Dialogue: 0,0:01:34.93,0:01:37.18,moren,,0,0,0,,然后你把这里这些连接起来
Dialogue: 0,0:01:37.18,0:01:40.13,moren,,0,0,0,,这样就不是四边形，就是单个的三角形
Dialogue: 0,0:01:40.66,0:01:44.90,moren,,0,0,0,,非常简单直接，不是很难构思
Dialogue: 0,0:01:45.05,0:01:48.81,moren,,0,0,0,,另一个实现的方法是，icosphere
Dialogue: 0,0:01:49.05,0:01:50.45,moren,,0,0,0,,icosphere就像是这样
Dialogue: 0,0:01:50.66,0:01:53.90,moren,,0,0,0,,它有个优势就是每个三角形都是一样大小的
Dialogue: 0,0:01:54.25,0:01:55.73,moren,,0,0,0,,和你用这些得到的不一样
Dialogue: 0,0:01:55.73,0:01:58.42,moren,,0,0,0,,小三角型在上面，大三角形在下面
Dialogue: 0,0:01:58.92,0:02:01.25,moren,,0,0,0,,这个更简单，这就是我们要用的方式
Dialogue: 0,0:02:01.68,0:02:04.64,moren,,0,0,0,,所以总的思想就是，用一个向量垂直向上
Dialogue: 0,0:02:04.77,0:02:06.00,moren,,0,0,0,,沿着z轴的方向
Dialogue: 0,0:02:06.48,0:02:09.53,moren,,0,0,0,,然后用一个循环旋转向量
Dialogue: 0,0:02:09.89,0:02:15.17,moren,,0,0,0,,每次增加分隔纬度的角度数量
Dialogue: 0,0:02:15.80,0:02:19.96,moren,,0,0,0,,然后对每一条纬线
Dialogue: 0,0:02:19.96,0:02:24.24,moren,,0,0,0,,做另一个循环根据经度方向旋转
Dialogue: 0,0:02:24.56,0:02:29.84,moren,,0,0,0,,然后在这个内层循环每次迭代产生一个角顶
Dialogue: 0,0:02:29.84,0:02:32.26,moren,,0,0,0,,在生成所有的角顶之后
Dialogue: 0,0:02:32.45,0:02:40.38,moren,,0,0,0,,然后生成索引来选择角顶，标记出三角形
Dialogue: 0,0:02:40.38,0:02:41.38,moren,,0,0,0,,来绘制
Dialogue: 0,0:02:41.64,0:02:42.66,moren,,0,0,0,,这样就得到了一个模型
Dialogue: 0,0:02:42.66,0:02:47.50,moren,,0,0,0,,我们的做法会跳过南极和北极
Dialogue: 0,0:02:48.50,0:02:50.86,moren,,0,0,0,,我们生成除了那两个之外的所有角顶
Dialogue: 0,0:02:51.20,0:02:54.16,moren,,0,0,0,,然后我们生成所有绕着这里的索引
Dialogue: 0,0:02:54.16,0:02:58.41,moren,,0,0,0,,除了这里弯曲的这个
Dialogue: 0,0:02:58.45,0:03:01.14,moren,,0,0,0,,连接着起点和终点的这个
Dialogue: 0,0:03:01.56,0:03:04.22,moren,,0,0,0,,所以我们没有封顶也没有封闭
Dialogue: 0,0:03:04.80,0:03:07.84,moren,,0,0,0,,我运行程序之后你就会看到了
Dialogue: 0,0:03:08.45,0:03:10.64,moren,,0,0,0,,所以让我们开始吧
Dialogue: 0,0:03:11.16,0:03:11.85,moren,,0,0,0,,我们怎么开始呢？
Dialogue: 0,0:03:11.85,0:03:21.32,moren,,0,0,0,,我们有个基础向量，朝向z轴上方，长度是半径
Dialogue: 0,0:03:22.96,0:03:27.57,moren,,0,0,0,,我们这里的这个函数Sphere的Get...下标三角形列表
Dialogue: 0,0:03:27.97,0:03:32.34,moren,,0,0,0,,给出半径，给出纬度分隔、经度分隔
Dialogue: 0,0:03:32.84,0:03:35.64,moren,,0,0,0,,得到了基础角顶或者说基础向量
Dialogue: 0,0:03:36.38,0:03:40.65,moren,,0,0,0,,然后得到纬度之间的角度
Dialogue: 0,0:03:41.05,0:03:43.57,moren,,0,0,0,,也就是 π / 纬度分隔
Dialogue: 0,0:03:43.57,0:03:45.57,moren,,0,0,0,,记得纬度是个半圆
Dialogue: 0,0:03:45.57,0:03:46.89,moren,,0,0,0,, 所以是 π / 纬度分隔
Dialogue: 0,0:03:47.28,0:03:48.89,moren,,0,0,0,,经度是完整的圆
Dialogue: 0,0:03:48.89,0:03:51.96,moren,,0,0,0,,所以是 2π / 经度分隔
Dialogue: 0,0:03:52.92,0:03:55.02,moren,,0,0,0,,我们创建个vector来装角顶
Dialogue: 0,0:03:55.30,0:03:56.76,moren,,0,0,0,,我们遍历纬度
Dialogue: 0,0:03:56.96,0:03:59.64,moren,,0,0,0,,我们从1开始因为我们要跳过北极点
Dialogue: 0,0:04:00.06,0:04:02.72,moren,,0,0,0,,然后我们去到分隔数量为止
Dialogue: 0,0:04:03.12,0:04:13.73,moren,,0,0,0,,然后我们根据(纬度角度 * 当前纬度下标)旋转基础向量
Dialogue: 0,0:04:14.02,0:04:17.62,moren,,0,0,0,,这样会给我们一个纬度基础
Dialogue: 0,0:04:18.01,0:04:19.34,moren,,0,0,0,,这个是我们的基础向量
Dialogue: 0,0:04:19.34,0:04:21.33,moren,,0,0,0,,然后我们的纬度
Dialogue: 0,0:04:22.61,0:04:25.58,moren,,0,0,0,,0 1 2
Dialogue: 0,0:04:25.94,0:04:29.28,moren,,0,0,0,,我们从这里旋转到这里
Dialogue: 0,0:04:30.89,0:04:33.44,moren,,0,0,0,,在x轴，这是z轴
Dialogue: 0,0:04:34.04,0:04:37.50,moren,,0,0,0,,这个我想是从我们的角度看到的x轴
Dialogue: 0,0:04:37.72,0:04:39.05,moren,,0,0,0,,这个就是y轴
Dialogue: 0,0:04:39.05,0:04:41.66,moren,,0,0,0,,看起来有点奇怪，但是你明白什么意思了吧？
Dialogue: 0,0:04:43.08,0:04:45.37,moren,,0,0,0,,所以绕着x轴旋转到这里
Dialogue: 0,0:04:45.37,0:04:47.30,moren,,0,0,0,,然后一旦我们得到了这个基础向量
Dialogue: 0,0:04:47.30,0:04:52.02,moren,,0,0,0,,我们就把它绕z轴旋转
Dialogue: 0,0:04:53.04,0:04:55.12,moren,,0,0,0,,这就是你看到的内层循环
Dialogue: 0,0:04:55.62,0:04:58.77,moren,,0,0,0,,内层循环中，从0到经度分隔数量
Dialogue: 0,0:04:59.32,0:05:01.88,moren,,0,0,0,,我们把角顶放到列表里面
Dialogue: 0,0:05:02.30,0:05:14.14,moren,,0,0,0,,然后把它的位置设置为基础纬度绕z轴旋转（经度角度 * 当前的经度索引）
Dialogue: 0,0:05:14.46,0:05:17.20,moren,,0,0,0,,然后你得到了一个角顶
Dialogue: 0,0:05:17.20,0:05:20.30,moren,,0,0,0,,对所有除了南极点和北极点之外角顶都这样做
Dialogue: 0,0:05:20.81,0:05:23.34,moren,,0,0,0,,现在计算索引
Dialogue: 0,0:05:25.52,0:05:29.98,moren,,0,0,0,,我们遍历纬度和经度
Dialogue: 0,0:05:30.50,0:05:36.50,moren,,0,0,0,,这里有个 叫什么来着 lambda函数
Dialogue: 0,0:05:36.81,0:05:45.62,moren,,0,0,0,,来基于iLat和iLong获取角顶列表中的下标
Dialogue: 0,0:05:45.62,0:05:46.37,moren,,0,0,0,,我用它
Dialogue: 0,0:05:47.01,0:05:53.25,moren,,0,0,0,,然后我就 iLat iLong，让我画下图给你们讲下怎么回事
Dialogue: 0,0:05:53.73,0:05:56.17,moren,,0,0,0,,让我们假设我们纬度的下标是这样的
Dialogue: 0,0:05:56.17,0:05:58.78,moren,,0,0,0,,0 1 2 3 4 5 6
Dialogue: 0,0:05:59.06,0:06:03.72,moren,,0,0,0,,然后我们的经度是0 1 2 3
Dialogue: 0,0:06:05.21,0:06:08.56,moren,,0,0,0,,让我们假设iLat是1
Dialogue: 0,0:06:09.52,0:06:10.56,moren,,0,0,0,,所以从这里开始
Dialogue: 0,0:06:11.12,0:06:16.48,moren,,0,0,0,,然后iLong 是在0
Dialogue: 0,0:06:16.48,0:06:19.84,moren,,0,0,0,,所以我们从这里 (iLat, iLong)
Dialogue: 0,0:06:20.06,0:06:23.38,moren,,0,0,0,,然后我们有个 (iLat, iLong + 1)
Dialogue: 0,0:06:23.72,0:06:28.44,moren,,0,0,0,,(iLat + 1, iLong), (iLat + 1, iLong + 1)
Dialogue: 0,0:06:28.44,0:06:31.58,moren,,0,0,0,,这是四个我们需要的
Dialogue: 0,0:06:32.04,0:06:35.42,moren,,0,0,0,,然后我们就选择三个
Dialogue: 0,0:06:36.74,0:06:38.61,moren,,0,0,0,,这三个创建一个三角形
Dialogue: 0,0:06:39.02,0:06:40.61,moren,,0,0,0,,然后这三个创建另外一个三角形
Dialogue: 0,0:06:40.61,0:06:43.36,moren,,0,0,0,,注意这个弯曲的顺序
Dialogue: 0,0:06:43.73,0:06:45.13,moren,,0,0,0,,然后我们就一直这样做
Dialogue: 0,0:06:45.13,0:06:46.85,moren,,0,0,0,,这就是这里的代码做的事情
Dialogue: 0,0:06:46.85,0:06:48.85,moren,,0,0,0,,对吧？(iLat, iLong)
Dialogue: 0,0:06:48.85,0:06:50.85,moren,,0,0,0,,(+1,)， 这里(,+1)
Dialogue: 0,0:06:51.22,0:06:53.29,moren,,0,0,0,,然后(+1, +1)
Dialogue: 0,0:06:53.96,0:06:56.40,moren,,0,0,0,,把它们全都放到indices中
Dialogue: 0,0:06:56.90,0:06:59.21,moren,,0,0,0,,这里是我们放封闭部分的地方
Dialogue: 0,0:06:59.68,0:07:06.49,moren,,0,0,0,,因为我们要把最后一个经度和第一个经度封闭起来
Dialogue: 0,0:07:06.85,0:07:08.24,moren,,0,0,0,,我们没有封闭
Dialogue: 0,0:07:08.46,0:07:09.86,moren,,0,0,0,,我们也还没封顶
Dialogue: 0,0:07:10.29,0:07:11.86,moren,,0,0,0,,什么意思呢？让我们看看
Dialogue: 0,0:07:12.12,0:07:15.65,moren,,0,0,0,,这个就是没有封闭和封顶的球体的样子
Dialogue: 0,0:07:15.65,0:07:18.97,moren,,0,0,0,,通常我工作的方式是先做一个简单版本
Dialogue: 0,0:07:18.97,0:07:23.13,moren,,0,0,0,,就是先排除特殊的情况
Dialogue: 0,0:07:23.44,0:07:27.69,moren,,0,0,0,,一旦有了基线，我们就可以处理其它的部分了
Dialogue: 0,0:07:27.69,0:07:29.69,moren,,0,0,0,,尽量以最小的步伐，一步步来
Dialogue: 0,0:07:30.10,0:07:36.01,moren,,0,0,0,,我们有了基线，剩下的就是封闭和封顶了
Dialogue: 0,0:07:36.01,0:07:37.64,moren,,0,0,0,,封顶角顶很简单
Dialogue: 0,0:07:37.69,0:07:43.65,moren,,0,0,0,,基础向量和它相反的向量得到北极点和南极点
Dialogue: 0,0:07:43.98,0:07:47.54,moren,,0,0,0,,我就把它们放到角顶列表的后面
Dialogue: 0,0:07:47.54,0:07:51.52,moren,,0,0,0,,我同时记录这两个角顶的下标 iNorthPole iSouthPole
Dialogue: 0,0:07:51.58,0:07:53.32,moren,,0,0,0,,因为它们之后会有用
Dialogue: 0,0:07:54.02,0:07:56.49,moren,,0,0,0,,然后下面这里，到封闭了
Dialogue: 0,0:07:56.74,0:07:58.12,moren,,0,0,0,,我们直接封起来
Dialogue: 0,0:07:58.18,0:08:04.32,moren,,0,0,0,,(iLat, longDiv-1)
Dialogue: 0,0:08:04.74,0:08:07.64,moren,,0,0,0,,然后就可以了
Dialogue: 0,0:08:08.54,0:08:11.72,moren,,0,0,0,,这里是0，这些是起点
Dialogue: 0,0:08:12.18,0:08:15.96,moren,,0,0,0,,封闭经度的主要思路是
Dialogue: 0,0:08:16.17,0:08:21.17,moren,,0,0,0,,最后一个经度连接到第一个经度0
Dialogue: 0,0:08:21.93,0:08:23.86,moren,,0,0,0,,这样你就有了“封闭乐队”（谐音？）
Dialogue: 0,0:08:24.19,0:08:34.46,moren,,0,0,0,,“封顶粉丝”就是遍历第一个和最后一个纬度的每个经度
Dialogue: 0,0:08:34.97,0:08:38.57,moren,,0,0,0,,把它们全都连接到北极点和南极点
Dialogue: 0,0:08:38.97,0:08:41.12,moren,,0,0,0,,所以这里不是6个角顶
Dialogue: 0,0:08:41.20,0:08:46.01,moren,,0,0,0,,我们只有3个，因为基本上我们每个面只需要1个三角形
Dialogue: 0,0:08:46.98,0:08:49.93,moren,,0,0,0,,然后 封闭三角形
Dialogue: 0,0:08:49.94,0:08:55.04,moren,,0,0,0,,你还需要把北极点和南极点封闭起来
Dialogue: 0,0:08:55.08,0:08:56.77,moren,,0,0,0,,在这里搞定了，这是特殊情况
Dialogue: 0,0:08:57.32,0:08:58.64,moren,,0,0,0,,然后就可以了
Dialogue: 0,0:08:58.81,0:09:02.68,moren,,0,0,0,,这样你就有了一个完整的球体
Dialogue: 0,0:09:03.00,0:09:03.60,moren,,0,0,0,,让我们一起看看
Dialogue: 0,0:09:03.92,0:09:06.57,moren,,0,0,0,,这个就是球体的样子
Dialogue: 0,0:09:06.70,0:09:10.21,moren,,0,0,0,,很棒的球体，超棒的
Dialogue: 0,0:09:10.32,0:09:17.72,moren,,0,0,0,,很 很 什么来着 多面 尖锐 块状
Dialogue: 0,0:09:18.28,0:09:20.81,moren,,0,0,0,,它很多平面阴影，但是看起来很酷
Dialogue: 0,0:09:20.90,0:09:21.77,moren,,0,0,0,,希望你们同意
Dialogue: 0,0:09:23.64,0:09:26.46,moren,,0,0,0,,为了让它...
Dialogue: 0,0:09:26.48,0:09:32.57,moren,,0,0,0,,我的意思是游戏里面通常球体是平滑的，虽然有时是多面体
Dialogue: 0,0:09:32.61,0:09:34.28,moren,,0,0,0,,有很多种方法让它平滑
Dialogue: 0,0:09:34.78,0:09:39.68,moren,,0,0,0,,你可以直接增加几何复杂度
Dialogue: 0,0:09:39.70,0:09:41.48,moren,,0,0,0,,增加三角形的数量
Dialogue: 0,0:09:41.82,0:09:44.37,moren,,0,0,0,,把它们分成更小的块
Dialogue: 0,0:09:44.49,0:09:45.72,moren,,0,0,0,,让我们试试看
Dialogue: 0,0:09:46.01,0:09:49.24,moren,,0,0,0,,在Sphere.GetPlain给个半径
Dialogue: 0,0:09:49.29,0:09:51.38,moren,,0,0,0,,保持原来的半径
Dialogue: 0,0:09:51.65,0:09:54.85,moren,,0,0,0,,但是增加纬度的分隔到
Dialogue: 0,0:09:54.90,0:09:58.16,moren,,0,0,0,,不知道，36吧
Dialogue: 0,0:09:59.16,0:10:02.86,moren,,0,0,0,,然后经度设置为72
Dialogue: 0,0:10:03.45,0:10:10.96,moren,,0,0,0,,保存，如果我们运行，我们应该能得到更好更圆的球体
Dialogue: 0,0:10:11.33,0:10:15.64,moren,,0,0,0,,它看上去更圆更少方块了
Dialogue: 0,0:10:15.98,0:10:21.33,moren,,0,0,0,,你还是能看到这些平面
Dialogue: 0,0:10:21.34,0:10:24.88,moren,,0,0,0,,它还是很多平面阴影
Dialogue: 0,0:10:24.90,0:10:26.76,moren,,0,0,0,,但它比原来圆了
Dialogue: 0,0:10:26.86,0:10:32.86,moren,,0,0,0,,你可以继续，继续增加曲面细分，增加网格复杂度
Dialogue: 0,0:10:33.02,0:10:35.82,moren,,0,0,0,,直到它几乎完全平滑
Dialogue: 0,0:10:36.06,0:10:40.49,moren,,0,0,0,,但那会有很多几何体，很多三角形要渲染
Dialogue: 0,0:10:40.78,0:10:42.81,moren,,0,0,0,,肯定有更好的方法的
Dialogue: 0,0:10:43.26,0:10:45.81,moren,,0,0,0,,让我们假设你有个球体
Dialogue: 0,0:10:46.14,0:10:48.57,moren,,0,0,0,,理想化的球体
Dialogue: 0,0:10:48.85,0:10:52.82,moren,,0,0,0,,实际上你的几何体是三角形
Dialogue: 0,0:10:53.22,0:10:55.21,moren,,0,0,0,,它们有平面，尖尖的
Dialogue: 0,0:10:55.77,0:10:58.60,moren,,0,0,0,,我画的是二维的
Dialogue: 0,0:10:58.69,0:11:00.86,moren,,0,0,0,,在三维也是一样的意思
Dialogue: 0,0:11:01.04,0:11:06.77,moren,,0,0,0,,我们目前做的是用三角形
Dialogue: 0,0:11:07.30,0:11:12.90,moren,,0,0,0,,这些是法线，我们做些向量运算
Dialogue: 0,0:11:12.91,0:11:15.85,moren,,0,0,0,,with the direction of the light and that
Dialogue: 0,0:11:15.86,0:11:18.40,moren,,0,0,0,,allows us to determine the color shading
Dialogue: 0,0:11:18.41,0:11:21.06,moren,,0,0,0,,of that triangle now let's take a
Dialogue: 0,0:11:21.07,0:11:24.51,moren,,0,0,0,,different approach let's say this mesh
Dialogue: 0,0:11:24.52,0:11:27.18,moren,,0,0,0,,here which is an approximation of the
Dialogue: 0,0:11:27.19,0:11:30.42,moren,,0,0,0,,ideal triangle at these vertices we're
Dialogue: 0,0:11:30.43,0:11:35.37,moren,,0,0,0,,gonna store some some normals that were
Dialogue: 0,0:11:35.38,0:11:40.03,moren,,0,0,0,,derived from the ideal the ideal shape
Dialogue: 0,0:11:40.04,0:11:43.03,moren,,0,0,0,,the ideal geometry so at this point on
Dialogue: 0,0:11:43.04,0:11:45.66,moren,,0,0,0,,the sphere or on the circle the normal
Dialogue: 0,0:11:45.67,0:11:48.18,moren,,0,0,0,,is here even though a vertex is a point
Dialogue: 0,0:11:48.19,0:11:50.86,moren,,0,0,0,,in space it can't have a normal if we
Dialogue: 0,0:11:50.87,0:11:53.94,moren,,0,0,0,,were to take the normal of the the ideal
Dialogue: 0,0:11:53.95,0:11:56.73,moren,,0,0,0,,shape it would be like this so let's
Dialogue: 0,0:11:56.74,0:12:00.91,moren,,0,0,0,,take those ideal normals store them at
Dialogue: 0,0:12:00.92,0:12:04.86,moren,,0,0,0,,the vertices of the approximation now we
Dialogue: 0,0:12:04.87,0:12:07.78,moren,,0,0,0,,can use these normals and get the color
Dialogue: 0,0:12:07.79,0:12:12.28,moren,,0,0,0,,at this point on the ideal shape by
Dialogue: 0,0:12:12.29,0:12:14.49,moren,,0,0,0,,doing the normal procedure dot product
Dialogue: 0,0:12:14.50,0:12:17.49,moren,,0,0,0,,between the direction of light and the
Dialogue: 0,0:12:17.50,0:12:19.90,moren,,0,0,0,,normal and that would get us the colors
Dialogue: 0,0:12:19.91,0:12:22.56,moren,,0,0,0,,at these points and they would be the
Dialogue: 0,0:12:22.57,0:12:27.49,moren,,0,0,0,,exact colors of the ideal sphere that's
Dialogue: 0,0:12:27.50,0:12:29.98,moren,,0,0,0,,great what do we do
Dialogue: 0,0:12:29.99,0:12:32.86,moren,,0,0,0,,for all the points in between all the
Dialogue: 0,0:12:32.87,0:12:36.52,moren,,0,0,0,,points along this triangle well if you
Dialogue: 0,0:12:36.53,0:12:38.62,moren,,0,0,0,,notice something about smooth shading
Dialogue: 0,0:12:38.63,0:12:40.90,moren,,0,0,0,,you'll notice that it's a smooth
Dialogue: 0,0:12:40.91,0:12:44.14,moren,,0,0,0,,gradient from one part of the geometry
Dialogue: 0,0:12:44.15,0:12:46.87,moren,,0,0,0,,to another it's a kind of blending it's
Dialogue: 0,0:12:46.88,0:12:50.17,moren,,0,0,0,,kind of interpolation so what we can do
Dialogue: 0,0:12:50.18,0:12:52.84,moren,,0,0,0,,is we can simulate that between these
Dialogue: 0,0:12:52.85,0:12:55.30,moren,,0,0,0,,two points here we can calculate the
Dialogue: 0,0:12:55.31,0:12:57.58,moren,,0,0,0,,color at this point calculate the color
Dialogue: 0,0:12:57.59,0:12:59.56,moren,,0,0,0,,at this point and for all the points in
Dialogue: 0,0:12:59.57,0:13:01.18,moren,,0,0,0,,between we just interpolate between
Dialogue: 0,0:13:01.19,0:13:03.52,moren,,0,0,0,,those two and we'll get a smooth
Dialogue: 0,0:13:03.53,0:13:06.79,moren,,0,0,0,,gradient across the surface it's not
Dialogue: 0,0:13:06.80,0:13:08.89,moren,,0,0,0,,going to be the exact color at every
Dialogue: 0,0:13:08.90,0:13:11.29,moren,,0,0,0,,point but it's going to be a good
Dialogue: 0,0:13:11.30,0:13:14.35,moren,,0,0,0,,approximation so we calculate our light
Dialogue: 0,0:13:14.36,0:13:19.06,moren,,0,0,0,,add vertices and then we blend it we
Dialogue: 0,0:13:19.07,0:13:21.85,moren,,0,0,0,,interpolate it across basically with our
Dialogue: 0,0:13:21.86,0:13:23.59,moren,,0,0,0,,pixel pixel shader with a triangle
Dialogue: 0,0:13:23.60,0:13:25.96,moren,,0,0,0,,rasterization now the good news is we've
Dialogue: 0,0:13:25.97,0:13:28.18,moren,,0,0,0,,already done all the stuff needed for
Dialogue: 0,0:13:28.19,0:13:31.24,moren,,0,0,0,,this when we did flat shading we started
Dialogue: 0,0:13:31.25,0:13:33.85,moren,,0,0,0,,by storing the normals in the vertices
Dialogue: 0,0:13:33.86,0:13:35.65,moren,,0,0,0,,and then later on we moved on to the
Dialogue: 0,0:13:35.66,0:13:38.25,moren,,0,0,0,,geometry shader so we've already done
Dialogue: 0,0:13:38.26,0:13:42.16,moren,,0,0,0,,vertex lighting and we've already done
Dialogue: 0,0:13:42.17,0:13:44.29,moren,,0,0,0,,blending between vertex colors that was
Dialogue: 0,0:13:44.30,0:13:45.85,moren,,0,0,0,,pretty early on in when I showed you
Dialogue: 0,0:13:45.86,0:13:48.43,moren,,0,0,0,,pixel shaders so we just gotta meld
Dialogue: 0,0:13:48.44,0:13:50.38,moren,,0,0,0,,those two ideas together now the other
Dialogue: 0,0:13:50.39,0:13:53.74,moren,,0,0,0,,thing is we need to store normal data in
Dialogue: 0,0:13:53.75,0:13:56.02,moren,,0,0,0,,our vertices so we need to generate that
Dialogue: 0,0:13:56.03,0:14:00.52,moren,,0,0,0,,with our whatchamacallit our procedural
Dialogue: 0,0:14:00.53,0:14:03.67,moren,,0,0,0,,generation code for spheres but it's
Dialogue: 0,0:14:03.68,0:14:05.50,moren,,0,0,0,,actually incredibly simple because think
Dialogue: 0,0:14:05.51,0:14:08.73,moren,,0,0,0,,about it for any point on the sphere the
Dialogue: 0,0:14:08.74,0:14:12.70,moren,,0,0,0,,position vertex or the position vector
Dialogue: 0,0:14:12.71,0:14:16.12,moren,,0,0,0,,is going to be the same direction as the
Dialogue: 0,0:14:16.13,0:14:18.82,moren,,0,0,0,,normal vector right in any position
Dialogue: 0,0:14:18.83,0:14:22.42,moren,,0,0,0,,vector any geometry position vector for
Dialogue: 0,0:14:22.43,0:14:24.73,moren,,0,0,0,,a vertex is the same as the normal
Dialogue: 0,0:14:24.74,0:14:26.53,moren,,0,0,0,,vector so all you got to do is take the
Dialogue: 0,0:14:26.54,0:14:28.99,moren,,0,0,0,,geometry position vector normalize that
Dialogue: 0,0:14:29.00,0:14:31.69,moren,,0,0,0,,and you've got the normal super simple
Dialogue: 0,0:14:31.70,0:14:35.50,moren,,0,0,0,,and in fact here in sphere we've got
Dialogue: 0,0:14:35.51,0:14:37.24,moren,,0,0,0,,another function called get plane
Dialogue: 0,0:14:37.25,0:14:40.45,moren,,0,0,0,,normals and all it does is it calls get
Dialogue: 0,0:14:40.46,0:14:42.67,moren,,0,0,0,,plane gets a plane triangle and then for
Dialogue: 0,0:14:42.68,0:14:43.66,moren,,0,0,0,,every vertex
Dialogue: 0,0:14:43.67,0:14:46.39,moren,,0,0,0,,it just sets the normal equal to the
Dialogue: 0,0:14:46.40,0:14:50.17,moren,,0,0,0,,normalized position of the vertex and
Dialogue: 0,0:14:50.18,0:14:52.24,moren,,0,0,0,,there you go you've got your get plane
Dialogue: 0,0:14:52.25,0:14:57.10,moren,,0,0,0,,normals now let's take a look at goo
Dialogue: 0,0:14:57.11,0:14:58.57,moren,,0,0,0,,road shading that Mulder
Dialogue: 0,0:14:58.58,0:15:00.82,moren,,0,0,0,,alright so the Gulag shading effect is
Dialogue: 0,0:15:00.83,0:15:02.68,moren,,0,0,0,,very similar like I said the vertex flat
Dialogue: 0,0:15:02.69,0:15:09.07,moren,,0,0,0,,effect except instead of having a single
Dialogue: 0,0:15:09.08,0:15:12.01,moren,,0,0,0,,color that is going across the entire
Dialogue: 0,0:15:12.02,0:15:15.07,moren,,0,0,0,,triangle we are going to be blending so
Dialogue: 0,0:15:15.08,0:15:16.93,moren,,0,0,0,,before with the vertex flat effect we
Dialogue: 0,0:15:16.94,0:15:18.82,moren,,0,0,0,,could just assume that all the colors
Dialogue: 0,0:15:18.83,0:15:20.14,moren,,0,0,0,,were the same and we didn't have to
Dialogue: 0,0:15:20.15,0:15:22.96,moren,,0,0,0,,perform any kind of interpolation we
Dialogue: 0,0:15:22.97,0:15:25.06,moren,,0,0,0,,just took the color directly but for
Dialogue: 0,0:15:25.07,0:15:26.29,moren,,0,0,0,,this one we're gonna have to store the
Dialogue: 0,0:15:26.30,0:15:30.40,moren,,0,0,0,,color as a floating vertex or a floating
Dialogue: 0,0:15:30.41,0:15:32.56,moren,,0,0,0,,vector and then interpolate that across
Dialogue: 0,0:15:32.57,0:15:34.21,moren,,0,0,0,,the face of the triangle and then
Dialogue: 0,0:15:34.22,0:15:36.43,moren,,0,0,0,,convert that floating point color into a
Dialogue: 0,0:15:36.44,0:15:39.61,moren,,0,0,0,,integer color one thing I noticed in the
Dialogue: 0,0:15:39.62,0:15:41.23,moren,,0,0,0,,vertex flat effect just a little bit of
Dialogue: 0,0:15:41.24,0:15:44.94,moren,,0,0,0,,dumbshit for a copy and paste was that I
Dialogue: 0,0:15:44.95,0:15:47.62,moren,,0,0,0,,for the vertex data type the input
Dialogue: 0,0:15:47.63,0:15:50.70,moren,,0,0,0,,vertex I made it so that the normal
Dialogue: 0,0:15:50.71,0:15:53.53,moren,,0,0,0,,would be part of interpolation but you
Dialogue: 0,0:15:53.54,0:15:55.87,moren,,0,0,0,,don't interpolate normals it's not
Dialogue: 0,0:15:55.88,0:15:58.93,moren,,0,0,0,,something you do now not not right now
Dialogue: 0,0:15:58.94,0:15:59.89,moren,,0,0,0,,anyways
Dialogue: 0,0:15:59.90,0:16:02.88,moren,,0,0,0,,so I removed that from here but anyways
Dialogue: 0,0:16:02.89,0:16:06.46,moren,,0,0,0,,that's not important what is important
Dialogue: 0,0:16:06.47,0:16:08.89,moren,,0,0,0,,is that we create a new effect called
Dialogue: 0,0:16:08.90,0:16:12.28,moren,,0,0,0,,the GU route effect and it is going to
Dialogue: 0,0:16:12.29,0:16:15.91,moren,,0,0,0,,have a vertex type that stores position
Dialogue: 0,0:16:15.92,0:16:22.51,moren,,0,0,0,,and stores are normal and position can
Dialogue: 0,0:16:22.52,0:16:25.75,moren,,0,0,0,,you know take part in these kind of
Dialogue: 0,0:16:25.76,0:16:26.76,moren,,0,0,0,,operations here
Dialogue: 0,0:16:26.77,0:16:29.08,moren,,0,0,0,,you know you define the operations now
Dialogue: 0,0:16:29.09,0:16:32.29,moren,,0,0,0,,the vertex shader is gonna have an
Dialogue: 0,0:16:32.30,0:16:35.62,moren,,0,0,0,,output type that stores a vector e for
Dialogue: 0,0:16:35.63,0:16:38.14,moren,,0,0,0,,color and a vector E position remember
Dialogue: 0,0:16:38.15,0:16:41.08,moren,,0,0,0,,color we got to make this effect 3
Dialogue: 0,0:16:41.09,0:16:42.64,moren,,0,0,0,,because it's got to be interpolated
Dialogue: 0,0:16:42.65,0:16:45.52,moren,,0,0,0,,across the triangle when we're doing the
Dialogue: 0,0:16:45.53,0:16:49.72,moren,,0,0,0,,blending so make it a vector E each of
Dialogue: 0,0:16:49.73,0:16:52.51,moren,,0,0,0,,those components XYZ corresponds to red
Dialogue: 0,0:16:52.52,0:16:53.10,moren,,0,0,0,,green blue
Dialogue: 0,0:16:53.11,0:16:54.99,moren,,0,0,0,,and then we converted back to integers
Dialogue: 0,0:16:55.00,0:16:58.35,moren,,0,0,0,,in the pixel shader and both of these
Dialogue: 0,0:16:58.36,0:17:00.09,moren,,0,0,0,,have to be interpolated so they both
Dialogue: 0,0:17:00.10,0:17:02.43,moren,,0,0,0,,have to have the operations implemented
Dialogue: 0,0:17:02.44,0:17:05.66,moren,,0,0,0,,and then down here it's just your basic
Dialogue: 0,0:17:05.67,0:17:08.28,moren,,0,0,0,,your basic color calculation right
Dialogue: 0,0:17:08.29,0:17:12.51,moren,,0,0,0,,you've got your diffuse which is your
Dialogue: 0,0:17:12.52,0:17:16.32,moren,,0,0,0,,dot product between your rotated normal
Dialogue: 0,0:17:16.33,0:17:20.64,moren,,0,0,0,,and the direction of light and your your
Dialogue: 0,0:17:20.65,0:17:24.06,moren,,0,0,0,,gonna clamp that and you multiply it by
Dialogue: 0,0:17:24.07,0:17:28.19,moren,,0,0,0,,the diffuse color yeah that's a color
Dialogue: 0,0:17:28.20,0:17:32.25,moren,,0,0,0,,right there that's your diffuse and then
Dialogue: 0,0:17:32.26,0:17:34.86,moren,,0,0,0,,what's this again now you add the
Dialogue: 0,0:17:34.87,0:17:36.87,moren,,0,0,0,,diffuse and the ambient color vectors
Dialogue: 0,0:17:36.88,0:17:39.39,moren,,0,0,0,,you multiply across with the color of
Dialogue: 0,0:17:39.40,0:17:42.51,moren,,0,0,0,,the the object the material color you
Dialogue: 0,0:17:42.52,0:17:44.22,moren,,0,0,0,,you saturate that and make sure it's
Dialogue: 0,0:17:44.23,0:17:46.77,moren,,0,0,0,,within the range of 0 to 1 and then you
Dialogue: 0,0:17:46.78,0:17:49.71,moren,,0,0,0,,multiply by 255 and then there you go
Dialogue: 0,0:17:49.72,0:17:53.31,moren,,0,0,0,,and then you just output your position
Dialogue: 0,0:17:53.32,0:17:55.35,moren,,0,0,0,,vector times the rotation plus the
Dialogue: 0,0:17:55.36,0:17:57.99,moren,,0,0,0,,translation and yell put the color that
Dialogue: 0,0:17:58.00,0:17:59.46,moren,,0,0,0,,you calculated and there you go
Dialogue: 0,0:17:59.47,0:18:00.84,moren,,0,0,0,,you've got all your functions here to
Dialogue: 0,0:18:00.85,0:18:04.17,moren,,0,0,0,,manipulate the the light and the
Dialogue: 0,0:18:04.18,0:18:07.23,moren,,0,0,0,,material and that's it default geometry
Dialogue: 0,0:18:07.24,0:18:09.32,moren,,0,0,0,,shader doesn't do anything special and
Dialogue: 0,0:18:09.33,0:18:13.95,moren,,0,0,0,,all of the actual blending happens in
Dialogue: 0,0:18:13.96,0:18:17.85,moren,,0,0,0,,the operations for your for your vertex
Dialogue: 0,0:18:17.86,0:18:21.69,moren,,0,0,0,,type the output type and then here all
Dialogue: 0,0:18:21.70,0:18:24.18,moren,,0,0,0,,you got to do is convert from this
Dialogue: 0,0:18:24.19,0:18:27.09,moren,,0,0,0,,vector e into an integer color type and
Dialogue: 0,0:18:27.10,0:18:28.68,moren,,0,0,0,,you've returned that in the pixel shader
Dialogue: 0,0:18:28.69,0:18:30.78,moren,,0,0,0,,and there's Bob's your uncle
Dialogue: 0,0:18:30.79,0:18:33.93,moren,,0,0,0,,you've got freaking gue rod bullshit's
Dialogue: 0,0:18:33.94,0:18:36.24,moren,,0,0,0,,the scene is very simple just use the GU
Dialogue: 0,0:18:36.25,0:18:39.24,moren,,0,0,0,,rod shader it uses I think you can pass
Dialogue: 0,0:18:39.25,0:18:43.11,moren,,0,0,0,,in any kind of any kind of mesh you want
Dialogue: 0,0:18:43.12,0:18:45.75,moren,,0,0,0,,and it will apply the Guru out effect to
Dialogue: 0,0:18:45.76,0:18:47.73,moren,,0,0,0,,that you can do your rotations of the
Dialogue: 0,0:18:47.74,0:18:50.61,moren,,0,0,0,,light and the model it's all the same
Dialogue: 0,0:18:50.62,0:18:54.90,moren,,0,0,0,,and in game dot cpp we add our school
Dialogue: 0,0:18:54.91,0:18:59.07,moren,,0,0,0,,Rod scene with the get plane normals for
Dialogue: 0,0:18:59.08,0:19:01.74,moren,,0,0,0,,the sphere and here's the the final
Dialogue: 0,0:19:01.75,0:19:03.78,moren,,0,0,0,,effect and as you can see it looks
Dialogue: 0,0:19:03.79,0:19:05.79,moren,,0,0,0,,pretty gosh
Dialogue: 0,0:19:05.80,0:19:08.82,moren,,0,0,0,,sexy if I do say so myself it's a it's a
Dialogue: 0,0:19:08.83,0:19:11.46,moren,,0,0,0,,very smooth effect now one thing that
Dialogue: 0,0:19:11.47,0:19:13.47,moren,,0,0,0,,you're gonna notice here or as you might
Dialogue: 0,0:19:13.48,0:19:15.21,moren,,0,0,0,,notice and you might have noticed this
Dialogue: 0,0:19:15.22,0:19:16.68,moren,,0,0,0,,you know just from playing games in
Dialogue: 0,0:19:16.69,0:19:18.75,moren,,0,0,0,,general but although the face of it
Dialogue: 0,0:19:18.76,0:19:20.67,moren,,0,0,0,,looks very smooth if you look at the
Dialogue: 0,0:19:20.68,0:19:22.74,moren,,0,0,0,,edges you can see the actual underlying
Dialogue: 0,0:19:22.75,0:19:25.74,moren,,0,0,0,,geometry and you can see the underlying
Dialogue: 0,0:19:25.75,0:19:28.77,moren,,0,0,0,,chunkiness of the geometry so shader
Dialogue: 0,0:19:28.78,0:19:31.11,moren,,0,0,0,,effect on the face it will make things
Dialogue: 0,0:19:31.12,0:19:33.48,moren,,0,0,0,,look very smooth but it can't hide the
Dialogue: 0,0:19:33.49,0:19:36.15,moren,,0,0,0,,silhouette and the the blockiness of the
Dialogue: 0,0:19:36.16,0:19:38.19,moren,,0,0,0,,silhouette the other thing you might
Dialogue: 0,0:19:38.20,0:19:40.02,moren,,0,0,0,,notice is you can still sort of see
Dialogue: 0,0:19:40.03,0:19:41.91,moren,,0,0,0,,something like some banding here you can
Dialogue: 0,0:19:41.92,0:19:44.19,moren,,0,0,0,,see some artifacts because like I said
Dialogue: 0,0:19:44.20,0:19:46.44,moren,,0,0,0,,before it's not it's not a perfect
Dialogue: 0,0:19:46.45,0:19:48.54,moren,,0,0,0,,representation it's an approximation of
Dialogue: 0,0:19:48.55,0:19:50.67,moren,,0,0,0,,the color gradient by linear
Dialogue: 0,0:19:50.68,0:19:52.80,moren,,0,0,0,,interpolation so that Gujrat shading is
Dialogue: 0,0:19:52.81,0:19:54.36,moren,,0,0,0,,great for things like spheres but now
Dialogue: 0,0:19:54.37,0:19:56.25,moren,,0,0,0,,what if you want to render something
Dialogue: 0,0:19:56.26,0:20:00.12,moren,,0,0,0,,like a cube and you're using a garage
Dialogue: 0,0:20:00.13,0:20:02.43,moren,,0,0,0,,shading effect it's a cube it's part of
Dialogue: 0,0:20:02.44,0:20:04.20,moren,,0,0,0,,a bigger model maybe that has round
Dialogue: 0,0:20:04.21,0:20:07.68,moren,,0,0,0,,stuff on it well if you do it the naive
Dialogue: 0,0:20:07.69,0:20:11.19,moren,,0,0,0,,way of sharing all your vertices you're
Dialogue: 0,0:20:11.20,0:20:13.44,moren,,0,0,0,,gonna have to store your normals so what
Dialogue: 0,0:20:13.45,0:20:15.66,moren,,0,0,0,,normals do you give these vertices if
Dialogue: 0,0:20:15.67,0:20:17.04,moren,,0,0,0,,you give them normals pointing in this
Dialogue: 0,0:20:17.05,0:20:21.30,moren,,0,0,0,,direction like this this face is gonna
Dialogue: 0,0:20:21.31,0:20:23.85,moren,,0,0,0,,be nice and flat but then what do you do
Dialogue: 0,0:20:23.86,0:20:25.68,moren,,0,0,0,,you put your knowledge here now this guy
Dialogue: 0,0:20:25.69,0:20:27.21,moren,,0,0,0,,is going to be interpolating between
Dialogue: 0,0:20:27.22,0:20:29.43,moren,,0,0,0,,here and here you're gonna get a smooth
Dialogue: 0,0:20:29.44,0:20:31.08,moren,,0,0,0,,gradient it's gonna look it's gonna look
Dialogue: 0,0:20:31.09,0:20:34.86,moren,,0,0,0,,around it instead of looking flat like
Dialogue: 0,0:20:34.87,0:20:37.65,moren,,0,0,0,,this that's no good but if you put these
Dialogue: 0,0:20:37.66,0:20:38.58,moren,,0,0,0,,guys up here
Dialogue: 0,0:20:38.59,0:20:40.56,moren,,0,0,0,,now you this guy over see the
Dialogue: 0,0:20:40.57,0:20:41.79,moren,,0,0,0,,problem you can't share the vertices
Dialogue: 0,0:20:41.80,0:20:43.26,moren,,0,0,0,,you've got to make these faces
Dialogue: 0,0:20:43.27,0:20:46.13,moren,,0,0,0,,independent like I shown you in previous
Dialogue: 0,0:20:46.14,0:20:48.54,moren,,0,0,0,,previous videos so if using gujrat
Dialogue: 0,0:20:48.55,0:20:50.04,moren,,0,0,0,,shading and you want to do something
Dialogue: 0,0:20:50.05,0:20:51.48,moren,,0,0,0,,that has hard you're gonna have to make
Dialogue: 0,0:20:51.49,0:20:54.36,moren,,0,0,0,,those harder faces the vertices of them
Dialogue: 0,0:20:54.37,0:20:56.51,moren,,0,0,0,,independent from each other to get that
Dialogue: 0,0:20:56.52,0:20:59.40,moren,,0,0,0,,to get that hard cut off instead of a
Dialogue: 0,0:20:59.41,0:21:01.65,moren,,0,0,0,,smooth gradient so that's one issue to
Dialogue: 0,0:21:01.66,0:21:04.08,moren,,0,0,0,,be aware of now another issue is how you
Dialogue: 0,0:21:04.09,0:21:06.42,moren,,0,0,0,,generate your normals for something like
Dialogue: 0,0:21:06.43,0:21:08.55,moren,,0,0,0,,a procedurally generated sphere it's
Dialogue: 0,0:21:08.56,0:21:10.41,moren,,0,0,0,,trivial right trivial to generate these
Dialogue: 0,0:21:10.42,0:21:12.24,moren,,0,0,0,,normals but what if you have something
Dialogue: 0,0:21:12.25,0:21:14.94,moren,,0,0,0,,like a low polygon model so maybe you
Dialogue: 0,0:21:14.95,0:21:16.89,moren,,0,0,0,,generate a model of a face like this
Dialogue: 0,0:21:16.90,0:21:19.20,moren,,0,0,0,,it's very high quality it has a high
Dialogue: 0,0:21:19.21,0:21:21.75,moren,,0,0,0,,or it has you know like mathematical
Dialogue: 0,0:21:21.76,0:21:25.89,moren,,0,0,0,,curves that define it and from that you
Dialogue: 0,0:21:25.90,0:21:29.67,moren,,0,0,0,,generate a low polygon model and let's
Dialogue: 0,0:21:29.68,0:21:31.20,moren,,0,0,0,,say you've only got them the low polygon
Dialogue: 0,0:21:31.21,0:21:33.60,moren,,0,0,0,,model you only got the positions of the
Dialogue: 0,0:21:33.61,0:21:36.71,moren,,0,0,0,,vertices how do you go how do you derive
Dialogue: 0,0:21:36.72,0:21:40.11,moren,,0,0,0,,the the surface normals so that you can
Dialogue: 0,0:21:40.12,0:21:41.43,moren,,0,0,0,,smooth shade it and get something that
Dialogue: 0,0:21:41.44,0:21:43.62,moren,,0,0,0,,looks more like this and the answer is
Dialogue: 0,0:21:43.63,0:21:45.51,moren,,0,0,0,,you can't really do it perfectly because
Dialogue: 0,0:21:45.52,0:21:47.16,moren,,0,0,0,,when you go from this high model to this
Dialogue: 0,0:21:47.17,0:21:50.46,moren,,0,0,0,,low you lose information and you can
Dialogue: 0,0:21:50.47,0:21:52.53,moren,,0,0,0,,kind of fake it by you know taking the
Dialogue: 0,0:21:52.54,0:21:54.57,moren,,0,0,0,,face normals and averaging them or
Dialogue: 0,0:21:54.58,0:21:57.75,moren,,0,0,0,,something like that but it won't be
Dialogue: 0,0:21:57.76,0:22:00.21,moren,,0,0,0,,perfect so in general what you do is
Dialogue: 0,0:22:00.22,0:22:02.55,moren,,0,0,0,,when you are generating the low poly
Dialogue: 0,0:22:02.56,0:22:05.43,moren,,0,0,0,,model you also generate the normals from
Dialogue: 0,0:22:05.44,0:22:07.05,moren,,0,0,0,,the high poly and then you've got good
Dialogue: 0,0:22:07.06,0:22:09.54,moren,,0,0,0,,normals to work with and in the modeling
Dialogue: 0,0:22:09.55,0:22:11.19,moren,,0,0,0,,software you can often tweak the normals
Dialogue: 0,0:22:11.20,0:22:13.02,moren,,0,0,0,,afterwards you can drag them around and
Dialogue: 0,0:22:13.03,0:22:15.21,moren,,0,0,0,,that changes the way the shading works
Dialogue: 0,0:22:15.22,0:22:19.98,moren,,0,0,0,,on your geometry but in general you're
Dialogue: 0,0:22:19.99,0:22:22.56,moren,,0,0,0,,not gonna get a perfect effect if you
Dialogue: 0,0:22:22.57,0:22:24.60,moren,,0,0,0,,try to take a model that doesn't have
Dialogue: 0,0:22:24.61,0:22:26.61,moren,,0,0,0,,normal informations and you know
Dialogue: 0,0:22:26.62,0:22:28.56,moren,,0,0,0,,procedurally add normal information
Dialogue: 0,0:22:28.57,0:22:31.80,moren,,0,0,0,,afterwards it's possible but it might
Dialogue: 0,0:22:31.81,0:22:33.90,moren,,0,0,0,,not look as good as you would hope now
Dialogue: 0,0:22:33.91,0:22:35.76,moren,,0,0,0,,sphere is a nice piece of geometry to
Dialogue: 0,0:22:35.77,0:22:38.07,moren,,0,0,0,,test our smooth shading but I also
Dialogue: 0,0:22:38.08,0:22:39.18,moren,,0,0,0,,wanted to test it with something a
Dialogue: 0,0:22:39.19,0:22:39.99,moren,,0,0,0,,little more interesting
Dialogue: 0,0:22:40.00,0:22:44.19,moren,,0,0,0,,so I implemented loading models with
Dialogue: 0,0:22:44.20,0:22:47.13,moren,,0,0,0,,normal data so that we can load a model
Dialogue: 0,0:22:47.14,0:22:48.93,moren,,0,0,0,,that has the normal data set up for it
Dialogue: 0,0:22:48.94,0:22:52.92,moren,,0,0,0,,and get a nice smooth shaded interesting
Dialogue: 0,0:22:52.93,0:22:55.80,moren,,0,0,0,,model so we're gonna be using tiny obj
Dialogue: 0,0:22:55.81,0:22:58.16,moren,,0,0,0,,and it's terrible and I hate it
Dialogue: 0,0:22:58.17,0:23:00.90,moren,,0,0,0,,but it's what I started with and I don't
Dialogue: 0,0:23:00.91,0:23:01.53,moren,,0,0,0,,want to change
Dialogue: 0,0:23:01.54,0:23:03.99,moren,,0,0,0,,midway through anyways look at our
Dialogue: 0,0:23:04.00,0:23:05.94,moren,,0,0,0,,models here we've got bunny obj and
Dialogue: 0,0:23:05.95,0:23:10.38,moren,,0,0,0,,we've got Suzanne and Suzanne then lucky
Dialogue: 0,0:23:10.39,0:23:12.60,moren,,0,0,0,,like you normally used to you've got
Dialogue: 0,0:23:12.61,0:23:15.51,moren,,0,0,0,,your vertices you list of vertices and
Dialogue: 0,0:23:15.52,0:23:16.89,moren,,0,0,0,,this is fairly detailed model so it's
Dialogue: 0,0:23:16.90,0:23:19.68,moren,,0,0,0,,gonna have a lot of vertices yeah there
Dialogue: 0,0:23:19.69,0:23:21.96,moren,,0,0,0,,we go and then you've got another list
Dialogue: 0,0:23:21.97,0:23:25.32,moren,,0,0,0,,here of vertex normals and you'll notice
Dialogue: 0,0:23:25.33,0:23:27.81,moren,,0,0,0,,these guys one thing that's pretty
Dialogue: 0,0:23:27.82,0:23:29.28,moren,,0,0,0,,prominent from them is they're all
Dialogue: 0,0:23:29.29,0:23:30.69,moren,,0,0,0,,normalized you're not gonna see any guys
Dialogue: 0,0:23:30.70,0:23:31.28,moren,,0,0,0,,that have
Dialogue: 0,0:23:31.29,0:23:36.45,moren,,0,0,0,,a length that's not one basically so you
Dialogue: 0,0:23:36.46,0:23:39.06,moren,,0,0,0,,got your vertex normals and then after
Dialogue: 0,0:23:39.07,0:23:42.53,moren,,0,0,0,,that you've got your faces and the faces
Dialogue: 0,0:23:42.54,0:23:44.43,moren,,0,0,0,,they specify you know three vertices
Dialogue: 0,0:23:44.44,0:23:47.66,moren,,0,0,0,,that form the triangle and they specify
Dialogue: 0,0:23:47.67,0:23:51.09,moren,,0,0,0,,the index into the position vector and
Dialogue: 0,0:23:51.10,0:23:54.45,moren,,0,0,0,,the index into the normal vector so
Dialogue: 0,0:23:54.46,0:23:55.73,moren,,0,0,0,,they're independent of each other and
Dialogue: 0,0:23:55.74,0:23:59.72,moren,,0,0,0,,they're indexed independently and tiny
Dialogue: 0,0:23:59.73,0:24:01.44,moren,,0,0,0,,obj makes it hard to get that
Dialogue: 0,0:24:01.45,0:24:02.72,moren,,0,0,0,,information out but you'll see that in a
Dialogue: 0,0:24:02.73,0:24:05.39,moren,,0,0,0,,second so how do we do this well we got
Dialogue: 0,0:24:05.40,0:24:06.98,moren,,0,0,0,,to figure out how to get that normal
Dialogue: 0,0:24:06.99,0:24:09.74,moren,,0,0,0,,information out of tiny obj into our
Dialogue: 0,0:24:09.75,0:24:12.26,moren,,0,0,0,,vertices so we're gonna index triangle
Dialogue: 0,0:24:12.27,0:24:14.69,moren,,0,0,0,,list dot H and I'm adding another
Dialogue: 0,0:24:14.70,0:24:17.94,moren,,0,0,0,,function in here load normals which
Dialogue: 0,0:24:17.95,0:24:21.50,moren,,0,0,0,,loads the mesh with normals and give it
Dialogue: 0,0:24:21.51,0:24:23.87,moren,,0,0,0,,a file name it's very similar to what we
Dialogue: 0,0:24:23.88,0:24:27.53,moren,,0,0,0,,had before here with just the loading
Dialogue: 0,0:24:27.54,0:24:31.22,moren,,0,0,0,,yeah here with just load so here we're
Dialogue: 0,0:24:31.23,0:24:37.56,moren,,0,0,0,,loading the vertices and indices normals
Dialogue: 0,0:24:37.57,0:24:45.41,moren,,0,0,0,,okay so so when we whenever we basically
Dialogue: 0,0:24:45.42,0:24:48.50,moren,,0,0,0,,whenever we're putting our indices into
Dialogue: 0,0:24:48.51,0:24:51.26,moren,,0,0,0,,the index buffer we're also going to
Dialogue: 0,0:24:51.27,0:24:53.66,moren,,0,0,0,,update the normals for all the affected
Dialogue: 0,0:24:53.67,0:24:57.18,moren,,0,0,0,,vertices so I love the index struct from
Dialogue: 0,0:24:57.19,0:25:00.21,moren,,0,0,0,,mesh indices indexed at the you know the
Dialogue: 0,0:25:00.22,0:25:02.94,moren,,0,0,0,,correct indexing position and this is
Dialogue: 0,0:25:02.95,0:25:07.34,moren,,0,0,0,,normal like before I then store the the
Dialogue: 0,0:25:07.35,0:25:12.09,moren,,0,0,0,,index into my own vector the ID x dot
Dialogue: 0,0:25:12.10,0:25:14.60,moren,,0,0,0,,vertex index but it also has ID x dot
Dialogue: 0,0:25:14.61,0:25:18.81,moren,,0,0,0,,normal index and there are three of
Dialogue: 0,0:25:18.82,0:25:23.72,moren,,0,0,0,,those and that corresponds to the three
Dialogue: 0,0:25:23.73,0:25:26.00,moren,,0,0,0,,components of the normal it's it's
Dialogue: 0,0:25:26.01,0:25:27.77,moren,,0,0,0,,it's this is really
Dialogue: 0,0:25:27.78,0:25:33.72,moren,,0,0,0,,garbage interface but I will index into
Dialogue: 0,0:25:33.73,0:25:37.79,moren,,0,0,0,,my vertices at the vertex index and I'm
Dialogue: 0,0:25:37.80,0:25:40.25,moren,,0,0,0,,gonna update its normal whenever I do an
Dialogue: 0,0:25:40.26,0:25:42.21,moren,,0,0,0,,index so sometimes some normals will be
Dialogue: 0,0:25:42.22,0:25:45.65,moren,,0,0,0,,updated twice or three times
Dialogue: 0,0:25:45.66,0:25:47.91,moren,,0,0,0,,but it doesn't matter I know I'm not
Dialogue: 0,0:25:47.92,0:25:49.62,moren,,0,0,0,,gonna worry about that this is the
Dialogue: 0,0:25:49.63,0:25:50.91,moren,,0,0,0,,easiest way I could think of doing it
Dialogue: 0,0:25:50.92,0:25:54.09,moren,,0,0,0,,and that gets that information together
Dialogue: 0,0:25:54.10,0:25:56.79,moren,,0,0,0,,because basically the way objects work
Dialogue: 0,0:25:56.80,0:25:59.97,moren,,0,0,0,,are the indices and the positions the
Dialogue: 0,0:25:59.98,0:26:01.89,moren,,0,0,0,,vertex positions and the vertex normals
Dialogue: 0,0:26:01.90,0:26:03.81,moren,,0,0,0,,are stored separately but in our system
Dialogue: 0,0:26:03.82,0:26:05.46,moren,,0,0,0,,we're storing them together so we've got
Dialogue: 0,0:26:05.47,0:26:06.63,moren,,0,0,0,,to get them together and this is how we
Dialogue: 0,0:26:06.64,0:26:09.24,moren,,0,0,0,,do it and then the rest is the same so
Dialogue: 0,0:26:09.25,0:26:11.46,moren,,0,0,0,,this is I don't recommend it if
Dialogue: 0,0:26:11.47,0:26:14.13,moren,,0,0,0,,you were going to be starting your own
Dialogue: 0,0:26:14.14,0:26:15.48,moren,,0,0,0,,from scratch and you wanted a good
Dialogue: 0,0:26:15.49,0:26:17.70,moren,,0,0,0,,library I haven't actually tried it out
Dialogue: 0,0:26:17.71,0:26:19.68,moren,,0,0,0,,myself so I can't say for sure but this
Dialogue: 0,0:26:19.69,0:26:21.60,moren,,0,0,0,,one looks really nice and easy to use
Dialogue: 0,0:26:21.61,0:26:24.66,moren,,0,0,0,,obj loader the interface is super simple
Dialogue: 0,0:26:24.67,0:26:26.79,moren,,0,0,0,,you create the loader you load the file
Dialogue: 0,0:26:26.80,0:26:30.69,moren,,0,0,0,,and then you've got access to all the
Dialogue: 0,0:26:30.70,0:26:33.90,moren,,0,0,0,,messages and for each mesh you can just
Dialogue: 0,0:26:33.91,0:26:36.54,moren,,0,0,0,,index into a vertex and get its position
Dialogue: 0,0:26:36.55,0:26:38.61,moren,,0,0,0,,and get the component with the dot
Dialogue: 0,0:26:38.62,0:26:41.28,moren,,0,0,0,,notation you have to do this
Dialogue: 0,0:26:41.29,0:26:44.01,moren,,0,0,0,,freaking indexing math to get out your
Dialogue: 0,0:26:44.02,0:26:46.56,moren,,0,0,0,,freaking earth makes me mad why did I
Dialogue: 0,0:26:46.57,0:26:48.51,moren,,0,0,0,,ever pick this terrible terrible library
Dialogue: 0,0:26:48.52,0:26:52.95,moren,,0,0,0,,anyways so that is loading and if we run
Dialogue: 0,0:26:52.96,0:26:55.97,moren,,0,0,0,,this we see we've got a beautiful
Dialogue: 0,0:26:55.98,0:26:57.60,moren,,0,0,0,,beautiful baby girl
Dialogue: 0,0:26:57.61,0:27:03.59,moren,,0,0,0,,look at this lovely lovely Suzanne and
Dialogue: 0,0:27:03.60,0:27:06.81,moren,,0,0,0,,yeah works works great smooth shading
Dialogue: 0,0:27:06.82,0:27:09.78,moren,,0,0,0,,loaded are loaded our mesh can use this
Dialogue: 0,0:27:09.79,0:27:12.90,moren,,0,0,0,,to load pretty much any mesh from object
Dialogue: 0,0:27:12.91,0:27:15.81,moren,,0,0,0,,file and if it's got normals it's gonna
Dialogue: 0,0:27:15.82,0:27:19.41,moren,,0,0,0,,work it's gonna be sweet so that's gonna
Dialogue: 0,0:27:19.42,0:27:24.12,moren,,0,0,0,,do it for this video umm I recommend you
Dialogue: 0,0:27:24.13,0:27:25.83,moren,,0,0,0,,to you know play with these things play
Dialogue: 0,0:27:25.84,0:27:29.16,moren,,0,0,0,,with the procedural generation explore
Dialogue: 0,0:27:29.17,0:27:33.68,moren,,0,0,0,,on your own definitely play around with
Dialogue: 0,0:27:33.69,0:27:36.48,moren,,0,0,0,,the garage shading code because it's
Dialogue: 0,0:27:36.49,0:27:39.12,moren,,0,0,0,,something that is very important to know
Dialogue: 0,0:27:39.13,0:27:43.35,moren,,0,0,0,,about it's the basis of a lot of shading
Dialogue: 0,0:27:43.36,0:27:46.62,moren,,0,0,0,,techniques and if you want a little
Dialogue: 0,0:27:46.63,0:27:48.84,moren,,0,0,0,,challenge I got one for you
Dialogue: 0,0:27:48.85,0:27:53.34,moren,,0,0,0,,try to procedurally reconstruct the
Dialogue: 0,0:27:53.35,0:27:55.44,moren,,0,0,0,,normals for these vertices and do a
Dialogue: 0,0:27:55.45,0:27:57.01,moren,,0,0,0,,smooth shading of the bunny
Dialogue: 0,0:27:57.02,0:28:00.56,moren,,0,0,0,,see what you can do I imagine you can do
Dialogue: 0,0:28:00.57,0:28:03.05,moren,,0,0,0,,a pretty good job with a simple
Dialogue: 0,0:28:03.06,0:28:06.29,moren,,0,0,0,,algorithm to reconstruct those vertex
Dialogue: 0,0:28:06.30,0:28:08.12,moren,,0,0,0,,normals so let's see we'll see what you
Dialogue: 0,0:28:08.13,0:28:09.62,moren,,0,0,0,,get notice I'm not gonna do like a
Dialogue: 0,0:28:09.63,0:28:11.06,moren,,0,0,0,,homework solution thing for it or
Dialogue: 0,0:28:11.07,0:28:12.32,moren,,0,0,0,,anything just a little challenge for you
Dialogue: 0,0:28:12.33,0:28:13.88,moren,,0,0,0,,if you're interested I hope you enjoyed
Dialogue: 0,0:28:13.89,0:28:15.23,moren,,0,0,0,,the video if you did please click the
Dialogue: 0,0:28:15.24,0:28:17.27,moren,,0,0,0,,like button helps a lot and I will see
Dialogue: 0,0:28:17.28,0:28:19.71,moren,,0,0,0,,you soon with some more 3d fundamentals
Dialogue: 0,0:28:19.72,0:28:42.31,moren,,0,0,0,,
